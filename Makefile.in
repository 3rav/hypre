#BHEADER***********************************************************************
# (c) 1998   The Regents of the University of California
#
# See the file COPYRIGHT_and_DISCLAIMER for a complete copyright
# notice, contact person, and disclaimer.
#
# $Revision$
#EHEADER***********************************************************************

SHELL = /bin/sh

srcdir = @srcdir@
VPATH = @srcdir@

# These are directories that are officially in HYPRE
HYPRE_DIRS =\
 utilities\
 struct_matrix_vector\
 struct_linear_solvers\
 test

# These are directories that are not yet officially in HYPRE
HYPRE_EXTRA_DIRS =\
 seq_matrix_vector\
 parcsr_matrix_vector\
 parcsr_linear_solvers\
 seq_linear_solvers/pamg\
# bmakes

#This is the documentation directory not yet offivially in HYPRE
HYPRE_DOCS =\
 docs

#These are the directories for structured matrices
HYPRE_STRUCT_DIRS =\
 utilities\
 struct_matrix_vector\
 struct_linear_solvers

#These are the directories for sequential structured matrices
HYPRE_SEQ_DIRS =\
 utilities\
 seq_matrix_vector\
 seq_linear_solvers

#These are the directories for parallel compressed sparse row
HYPRE_PARCSR_DIRS =\
 utilities\
 parcsr_matrix_vector\
 parcsr_linear_solvers

#These are the directories for the conceptual structured interface
#HYPRE_CI_STRUCT_DIRS =\
# bmakes 

all:
	@ \
	for i in ${HYPRE_DIRS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Making $$i ..."; \
	    (cd $$i; make); \
	    echo ""; \
	  fi; \
	done


install:
	@ \
	if [ ! "$$HYPRE_INSTALL_DIR" ]; \
	then \
	   echo "Error: set the HYPRE_INSTALL_DIR environment variable"; \
	   exit 1; \
	fi; \
	if [ ! -d $$HYPRE_INSTALL_DIR ]; \
	then \
	   echo "Error: no directory HYPRE_INSTALL_DIR=$$HYPRE_INSTALL_DIR"; \
	   exit 1; \
	fi; \
	( \
	   cd $$HYPRE_INSTALL_DIR; \
	   DIRS="bin docs include lib"; \
	   for i in $$DIRS; \
	   do \
	      rm -fr $$i; \
	      mkdir $$i; \
	   done \
	); \
	for i in ${HYPRE_DIRS} ${HYPRE_DOCS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Installing $$i ..."; \
	    (cd $$i; make install); \
	    echo ""; \
	  fi; \
	done

clean:
	@ \
	for i in ${HYPRE_DIRS} ${HYPRE_EXTRA_DIRS} ${HYPRE_DOCS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Cleaning $$i ..."; \
	    (cd $$i; make clean); \
	  fi; \
	done

veryclean:
	@ \
	for i in ${HYPRE_DIRS} ${HYPRE_EXTRA_DIRS} ${HYPRE_DOCS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Very-cleaning $$i ..."; \
	    (cd $$i; make veryclean); \
	  fi; \
	done


beta:
	@ \
	for i in ${HYPRE_DIRS} ${HYPRE_EXTRA_DIRS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Making $$i ..."; \
	    (cd $$i; make); \
	    echo ""; \
	  fi; \
	done

docs:
	@ \
	for i in ${HYPRE_DOCS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Making $$i ..."; \
	    (cd $$i; make); \
	    echo ""; \
	  fi; \
	done


struct:
	@ \
	for i in ${HYPRE_STRUCT_DIRS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Making $$i ..."; \
	    (cd $$i; make); \
	    echo ""; \
	  fi; \
	done


parcsr:
	@ \
	for i in ${HYPRE_PARCSR_DIRS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Making $$i ..."; \
	    (cd $$i; make); \
	    echo ""; \
	  fi; \
	done


ci_struct:
	@ \
	for i in ${HYPRE_CI_STRUCT_DIRS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Making $$i ..."; \
	    (cd $$i; make); \
	    echo ""; \
	  fi; \
	done

seq:
	@ \
	for i in ${HYPRE_SEQ_DIRS}; \
	do \
	  if [ -d $$i ]; \
	  then \
	    echo "Making $$i ..."; \
	    (cd $$i; make); \
	    echo ""; \
	  fi; \
	done


