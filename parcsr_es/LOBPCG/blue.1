#!/bin/sh
#PSUB -re -ro -me -b a_casc -c pbatch

OUTFILE=$PSUB_WORKDIR/$PSUB_REQNAME.out

export MP_TIMEOUT=2000

date > $OUTFILE

##### Change it to the right dir
cd /g/g22/aknyazev/hypre-1.6.0.blue/src/lobpcg

##### Run it on blue by calling  
##### psub -np -ln   1 -g    4 -tM 30m blue.1
##### where ln is number of nodes and g is total CPU number (4 per node) 
##### set np = g below or do not use np at all  
poe ./IJ_eigen_solver -np 4  -nolobpcg -solver 1  >> $OUTFILE 
poe ./IJ_eigen_solver -np 4            -solver 1 -vrand 1  >> $OUTFILE
poe ./IJ_eigen_solver -np 4            -solver 1 -vrand 5  >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -nolobpcg -solver 2  >> $OUTFILE 
poe ./IJ_eigen_solver -np 4            -solver 2 -vrand 1  >> $OUTFILE
poe ./IJ_eigen_solver -np 4            -solver 2 -vrand 5  >> $OUTFILE 
poe ./IJ_eigen_solver -np 4  -nolobpcg -solver 8   >> $OUTFILE 
poe ./IJ_eigen_solver -np 4            -solver 8 -vrand 1   >> $OUTFILE
poe ./IJ_eigen_solver -np 4            -solver 8 -vrand 5   >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -nolobpcg -solver 12   >> $OUTFILE
poe ./IJ_eigen_solver -np 4            -solver 12 -vrand 1   >> $OUTFILE
poe ./IJ_eigen_solver -np 4            -solver 12 -vrand 5   >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -nolobpcg -solver 43   >> $OUTFILE
poe ./IJ_eigen_solver -np 4            -solver 43 -vrand 1   >> $OUTFILE
poe ./IJ_eigen_solver -np 4            -solver 43 -vrand 5   >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -9pt -solver 12  -pcgitr 2 -vrand 1  >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -9pt -solver 12  -pcgitr 2 -vrand 2  >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -9pt -solver 12  -pcgitr 2 -vrand 4  >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -9pt -solver 12  -pcgitr 2 -vrand 8  >> $OUTFILE
poe ./IJ_eigen_solver -np 4 -27pt -solver 1 -vrand 5 -pcgitr 1  >> $OUTFILE 
poe ./IJ_eigen_solver -np 4 -27pt -solver 1 -vrand 5 -pcgitr 2  >> $OUTFILE
poe ./IJ_eigen_solver -np 4 -27pt -solver 1 -vrand 5 -pcgitr 3  >> $OUTFILE
poe ./IJ_eigen_solver -np 4  -laplacian -n 10 10 10 -solver 43 -xin Xin.mtx -pcgitr 2  >> $OUTFILE 
poe ./IJ_eigen_solver -np 4  -ain laplacian_10_10_10.mtx -solver 43  -xin Xin.mtx -pcgitr 2   >> $OUTFILE
poe ./IJ_eigen_solver -np 4 -ain laplacian_10_10_10.mtx -tin laplacian_10_10_10.mtx -solver 43 -xin Xin.mtx -pcgitr 2   >> $OUTFILE
######poe ./IJ_eigen_solver -np 4  -27pt -n  50  50  50 -solver 1 -vrand 40 -pcgitr 2  >> $OUTFILE
######poe ./IJ_eigen_solver -np 4  -27pt -n 100 100 100 -solver 2 -vrand  4 -pcgitr 2  >> $OUTFILE
  
