#BHEADER***********************************************************************
# (c) 1999   The Regents of the University of California
#
# See the file COPYRIGHT_and_DISCLAIMER for a complete copyright
# notice, contact person, and disclaimer.
#
# $Revision$
#EHEADER***********************************************************************


.SUFFIXES: .cc .c .f .o

all: lib

install: all

CXX = @CXX@
CXX = KCC -I/usr/local/mpi/mpich-1.1.1/lib/solaris/ch_p4/c++ \
        -I/usr/local/mpi/mpich-1.1.1/include \
        -I/usr/local/mpi/mpich-1.1.1/lib/solaris/ch_p4 \
        -I/usr/local/mpi/mpich-1.1.1/lib/solaris/ch_p4/c++

CXXFLAGS = \
 -I../../distributed_matrix\
 -I../../IJ_matrix_vector\
 -I../../parcsr_matrix_vector\
 -I../../seq_matrix_vector\
 -I../../utilities\
 -I../..

HEADERS =\
 HYPRE_ParaSAILS.h\
 hypre_ParaSAILS_i.h\
 ParaSAILS.h\
 util.h\
 barrier.h
 
HYPREFILES =\
 HYPRE_ParaSAILS.cc

LOCALFILES =\
 ParaSAILS.cc\
 barrier.cc


FILES = $(HYPREFILES) $(LOCALFILES)


OBJS = ${FILES:.c=.o} ${FILES:.cc=.o}


##################################################################
# Main rules
##################################################################

lib: ${OBJS}
	@echo  "Building $@ ... "
	@echo  "Building ${OBJS} ... "
	@ar -rcu libHYPRE_ParaSAILS.a ${OBJS}
	@ranlib libHYPRE_ParaSAILS.a 

${OBJS}: ${HEADERS}


##################################################################
# Targets
##################################################################

clean:
	@rm -f *.o *.dxx

veryclean: clean
	@rm -f libHYPRE_*.a


##################################################################
# Generic rules
##################################################################

.cc.o:
	${CXX} -o $@ -c ${CXXFLAGS} $<

