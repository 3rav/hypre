MPIRUN="mpirun -np 2"
DRIVER="./ij_es"

#echo Running $MPIRUN $DRIVER with $RUNPARM

#=============================================================================
# ij driver for eigenvaluesolvers: (wihtout -lobpcg option runs ij) 
# Run default case with all available PCG preconditioners (solvers): 
#    1:  BoomerAMG_PCG
#    2:  DS_PCG
#    8:  ParaSails_PCG
#    12: Schwarz-PCG  
#    43: Euclid-PCG
#=============================================================================
#

#echo Running with -solver 1 -pcgitr 0
#echo PCG run...
$MPIRUN $DRIVER  -solver 1 -tol 1e-6 $RUNPARM > solvers.out.1 
#echo LOBPCG run for one eigenpair...
$MPIRUN $DRIVER  -lobpcg  -solver 1 -tol 1e-6 -pcgitr 0 -seed 1 -vrand 1 $RUNPARM > solvers.out.1.lobpcg 
#echo LOBPCG run for 5 eigenpairs...
$MPIRUN $DRIVER  -lobpcg -solver 1 -tol 1e-6 -pcgitr 0  -seed 1 -vrand 5 $RUNPARM  > solvers.out.1.lobpcg.5 

#echo Running with -solver 2 -pcgitr 20
#echo PCG run...
$MPIRUN $DRIVER  -solver 2 -tol 1e-6 $RUNPARM  > solvers.out.2
#echo LOBPCG run for one eigenpair...
$MPIRUN $DRIVER  -lobpcg -solver 2 -tol 1e-6  -pcgitr 20 -seed 1 -vrand 1 $RUNPARM  > solvers.out.2.lobpcg 
#echo LOBPCG run for 5 eigenpairs...
$MPIRUN $DRIVER  -lobpcg -solver 2 -tol 1e-6  -pcgitr 20 -seed 1 -vrand 5 $RUNPARM  > solvers.out.2.lobpcg.5 

if [ "$MPIRUN" != "mpimon" ]; then
#echo Running with -solver 8 -pcgitr 10
#echo PCG run...
$MPIRUN $DRIVER  -solver 8 $RUNPARM  > solvers.out.8
#echo LOBPCG run for one eigenpair...
$MPIRUN $DRIVER  -lobpcg -solver 8 -tol 1e-6  -pcgitr 10 -seed 1 -vrand 1 $RUNPARM  > solvers.out.8.lobpcg 
#echo LOBPCG run for 5 eigenpairs...
$MPIRUN $DRIVER  -lobpcg -solver 8 -tol 1e-6  -pcgitr 10 -seed 1 -vrand 5 $RUNPARM  > solvers.out.8.lobpcg.5 
fi

#echo Running with -solver 12 -pcgitr 10
#echo PCG run...
$MPIRUN $DRIVER  -solver 12 $RUNPARM  > solvers.out.12
#echo LOBPCG run for one eigenpair...
$MPIRUN $DRIVER  -lobpcg -solver 12 -tol 1e-6  -pcgitr 10 -seed 1 -vrand 1 $RUNPARM  > solvers.out.12.lobpcg 
#echo LOBPCG run for 5 eigenpairs...
$MPIRUN $DRIVER  -lobpcg -solver 12 -tol 1e-6  -pcgitr 10 -seed 1 -vrand 5 $RUNPARM  > solvers.out.12.lobpcg.5 

#echo Running with -solver 43 -pcgitr 10
#echo PCG run...
$MPIRUN $DRIVER  -solver 43 $RUNPARM  > solvers.out.43
#echo LOBPCG run for one eigenpair...
$MPIRUN $DRIVER  -lobpcg -solver 43 -tol 1e-6  -pcgitr 10 -seed 1 -vrand 1 $RUNPARM  > solvers.out.43.lobpcg 
#echo LOBPCG run for 5 eigenpairs...
$MPIRUN $DRIVER  -lobpcg -solver 43 -tol 1e-6  -pcgitr 10 -seed 1 -vrand 5 $RUNPARM  > solvers.out.43.lobpcg.5 

